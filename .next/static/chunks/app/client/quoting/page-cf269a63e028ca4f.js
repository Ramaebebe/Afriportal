(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[563],{78142:function(e,t,s){Promise.resolve().then(s.bind(s,45483))},45483:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return m},dynamic:function(){return d}});var n=s(57437),a=s(2265),i=s(53375),l=s(24457),r=s.n(l);function c(e){let{refEl:t,vehicle:s}=e,l=(0,a.useCallback)(async()=>{let e=t.current;if(!e)return;let n=(await r()(e,{scale:2,useCORS:!0,backgroundColor:"#ffffff"})).toDataURL("image/png"),a=new i.ZP({unit:"px",format:"a4"}),l=a.internal.pageSize.getWidth(),c=a.internal.pageSize.getHeight();a.addImage(n,"PNG",0,0,l,c);let d="Afrirent_Quote_".concat(s.replace(/[^a-z0-9]+/gi,"_").slice(0,50),".pdf");a.save(d)},[t,s]);return(0,n.jsx)("button",{className:"btn",onClick:l,children:"Download PDF"})}let d="force-dynamic";function m(){let[e,t]=(0,a.useState)([]),[s,i]=(0,a.useState)({mmCode:"",termMonths:48,residualPct:25,rateApr:12.5,mileageKmPerMonth:2e3,maintenanceRpm:450,tyresRpm:180,insuranceRpm:350,adminRpm:99,riskGrade:"B",excessCpkCents:15}),[l,r]=(0,a.useState)(null);(0,a.useEffect)(()=>{fetch("/vehicles.sample.json").then(e=>e.json()).then(t)},[]);let d=e.find(e=>e.mmCode===s.mmCode),m=(0,a.useRef)(null),h=(0,a.useMemo)(()=>d?"".concat(d.make," ").concat(d.model," ").concat(d.derivative," (MM ").concat(d.mmCode,")"):"",[d]);return(0,n.jsxs)("main",{className:"max-w-4xl",children:[(0,n.jsxs)("div",{className:"card p-6",children:[(0,n.jsx)("h1",{className:"text-3xl font-bold mb-3",children:"Create Quote"}),(0,n.jsx)("p",{className:"section-sub",children:"Pick a vehicle, set the inputs, then calculate and export a branded PDF."}),(0,n.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"text-sm text-white/70",children:"Vehicle"}),(0,n.jsxs)("select",{className:"input",value:s.mmCode,onChange:e=>i(t=>({...t,mmCode:e.target.value})),children:[(0,n.jsx)("option",{value:"",children:"Select..."}),e.map(e=>(0,n.jsxs)("option",{value:e.mmCode,children:[e.make," ",e.model," ",e.derivative," — MM ",e.mmCode," — R",e.capex.toLocaleString()]},e.mmCode))]})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"text-sm text-white/70",children:"Term (months)"}),(0,n.jsx)("input",{className:"input",type:"number",value:s.termMonths,onChange:e=>i(t=>({...t,termMonths:+e.target.value}))})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"text-sm text-white/70",children:"Residual (%)"}),(0,n.jsx)("input",{className:"input",type:"number",value:s.residualPct,onChange:e=>i(t=>({...t,residualPct:+e.target.value}))})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"text-sm text-white/70",children:"APR (%)"}),(0,n.jsx)("input",{className:"input",type:"number",value:s.rateApr,onChange:e=>i(t=>({...t,rateApr:+e.target.value}))})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"text-sm text-white/70",children:"Mileage (km/mo)"}),(0,n.jsx)("input",{className:"input",type:"number",value:s.mileageKmPerMonth,onChange:e=>i(t=>({...t,mileageKmPerMonth:+e.target.value}))})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"text-sm text-white/70",children:"Maintenance (R/pm)"}),(0,n.jsx)("input",{className:"input",type:"number",value:s.maintenanceRpm,onChange:e=>i(t=>({...t,maintenanceRpm:+e.target.value}))})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"text-sm text-white/70",children:"Tyres (R/pm)"}),(0,n.jsx)("input",{className:"input",type:"number",value:s.tyresRpm,onChange:e=>i(t=>({...t,tyresRpm:+e.target.value}))})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"text-sm text-white/70",children:"Insurance (R/pm)"}),(0,n.jsx)("input",{className:"input",type:"number",value:s.insuranceRpm,onChange:e=>i(t=>({...t,insuranceRpm:+e.target.value}))})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"text-sm text-white/70",children:"Admin (R/pm)"}),(0,n.jsx)("input",{className:"input",type:"number",value:s.adminRpm,onChange:e=>i(t=>({...t,adminRpm:+e.target.value}))})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"text-sm text-white/70",children:"Risk Grade (A–E)"}),(0,n.jsx)("select",{className:"input",value:s.riskGrade,onChange:e=>i(t=>({...t,riskGrade:e.target.value})),children:["A","B","C","D","E"].map(e=>(0,n.jsx)("option",{value:e,children:e},e))})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"text-sm text-white/70",children:"Excess CPK (c/km)"}),(0,n.jsx)("input",{className:"input",type:"number",value:s.excessCpkCents,onChange:e=>i(t=>({...t,excessCpkCents:+e.target.value}))})]})]}),(0,n.jsxs)("div",{className:"flex gap-3 mt-4",children:[(0,n.jsx)("button",{className:"btn",onClick:()=>{d&&r(function(e){let{capex:t,termMonths:s,residualPct:n,rateApr:a,maintenanceRpm:i,tyresRpm:l,insuranceRpm:r,adminRpm:c}=e,d=a/100/12,m=(t-n/100*t)*d/(1-Math.pow(1+d,-s))+i+l+r+c;return{monthlyPayment:Number(m.toFixed(2)),totalCost:Number((m*s).toFixed(2))}}({...s,capex:d.capex}))},disabled:!d,children:"Calculate"}),l&&(0,n.jsx)(c,{refEl:m,vehicle:h,input:s,output:l})]})]}),l&&(0,n.jsx)("div",{className:"hidden",children:(0,n.jsx)("div",{ref:m,children:(0,n.jsxs)("div",{className:"print-a4",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsxs)("div",{className:"flex items-center gap-3",children:[(0,n.jsx)("img",{src:"/brand/afrirent_logo.png",alt:"Afrirent",style:{height:40}}),(0,n.jsx)("div",{className:"print-h1",children:"Afrirent Mobility — Quotation"})]}),(0,n.jsxs)("div",{className:"print-meta",children:["Generated: ",new Date().toLocaleDateString()]})]}),(0,n.jsx)("hr",{style:{margin:"12px 0"}}),(0,n.jsx)("div",{className:"print-meta",children:"Vehicle"}),(0,n.jsx)("div",{style:{fontWeight:600,marginBottom:8},children:h}),(0,n.jsxs)("table",{className:"print-table",children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{children:"Term (months)"}),(0,n.jsx)("th",{children:"Residual %"}),(0,n.jsx)("th",{children:"APR %"}),(0,n.jsx)("th",{children:"Mileage km/mo"})]})}),(0,n.jsx)("tbody",{children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{children:s.termMonths}),(0,n.jsx)("td",{children:s.residualPct}),(0,n.jsx)("td",{children:s.rateApr}),(0,n.jsx)("td",{children:s.mileageKmPerMonth})]})})]}),(0,n.jsxs)("table",{className:"print-table",children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{children:"Maintenance"}),(0,n.jsx)("th",{children:"Tyres"}),(0,n.jsx)("th",{children:"Insurance"}),(0,n.jsx)("th",{children:"Admin"}),(0,n.jsx)("th",{children:"Risk Grade"})]})}),(0,n.jsx)("tbody",{children:(0,n.jsxs)("tr",{children:[(0,n.jsxs)("td",{children:["R ",s.maintenanceRpm]}),(0,n.jsxs)("td",{children:["R ",s.tyresRpm]}),(0,n.jsxs)("td",{children:["R ",s.insuranceRpm]}),(0,n.jsxs)("td",{children:["R ",s.adminRpm]}),(0,n.jsx)("td",{children:s.riskGrade})]})})]}),(0,n.jsxs)("div",{style:{display:"flex",gap:24,marginTop:16},children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:"print-meta",children:"Monthly Payment"}),(0,n.jsxs)("div",{style:{fontSize:24,fontWeight:700},children:["R ",l.monthlyPayment.toLocaleString()]})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:"print-meta",children:"Total Cost"}),(0,n.jsxs)("div",{style:{fontSize:24,fontWeight:700},children:["R ",l.totalCost.toLocaleString()]})]})]}),(0,n.jsx)("div",{style:{marginTop:24,fontSize:12,color:"#444"},children:"Notes: Figures are indicative for budgeting. Final pricing subject to credit approval and signed agreement."}),(0,n.jsx)("div",{style:{position:"absolute",right:24,bottom:24,opacity:.08},children:(0,n.jsx)("img",{src:"/brand/paw.png",alt:"",style:{height:100}})})]})})})]})}}},function(e){e.O(0,[337,505,553,971,117,744],function(){return e(e.s=78142)}),_N_E=e.O()}]);